# Phase 2: 完整三组实验对比分析

**测试时间**: 2026-01-24 10:14:27

## 实验配置

| 实验组 | 说明 | 数据来源 |
|--------|------|----------|
| **Baseline** | 原始文档直接检索（向量+BM25） | **预构建ChromaDB** (与CR相同架构) |
| **CR Enhanced** | 上下文增强检索 | **预构建ChromaDB**，含LLM生成的上下文 |
| **Knowledge Graph** | 知识图谱推理检索 | 预构建KG，三元组+实体关系 |

## 测试问题分类

| 类型 | 数量 | 说明 |
|------|------|------|
| 简单事实 | 1 | - |
| 枚举列表 | 2 | - |
| 规则描述 | 1 | - |
| 流程说明 | 1 | - |
| 条件判断 | 1 | - |
| 实体查询 | 1 | - |
| 多跳推理 | 1 | - |

## 逐题详细对比

### Q1: 杨家横水库的汛限水位是多少？

**类型**: 简单事实 | **分类**: 数值查询

| 实验 | Top-1 得分 | 耗时(s) | Top-1 预览 |
|------|-----------|---------|------------|
| Baseline | 0.603 | 0.19 | 为287.90mm（1986年），雨量年内分 布极不均匀，70%集
 中在汛期6～9四个月，呈现出春旱、夏涝、晚秋又旱的规律。
 3、流域内水利工程和水 文网站... |
| CR_Enhanced | 0.611 | 0.08 | Flood control procedures and indicators for Yangjiaheng Reservoir.最高水位的洪水），要采取临时... |
| KG | 1000.000 | 22.04 | 附工程特性表 
 表2—1     杨家横水库工程特性表       高程系统：85黄海基面
 水库名称 杨家横水库 坝型 心墙坝
 8主　
 　
 　
 坝建... |

### Q2: 防洪预案中的应急预案等级有哪些？

**类型**: 枚举列表 | **分类**: 分级查询

| 实验 | Top-1 得分 | 耗时(s) | Top-1 预览 |
|------|-----------|---------|------------|
| Baseline | 0.512 | 0.04 | 信息包
 括预警级别、出险水库的地 点、出险时间、 可能影响范围、警示事项、
 应采取的措施和发 布机关等。预警 信息的发布、调整和解除可通过广
 播、电视、通... |
| CR_Enhanced | 0.512 | 0.02 | 信息包
 括预警级别、出险水库的地 点、出险时间、 可能影响范围、警示事项、
 应采取的措施和发 布机关等。预警 信息的发布、调整和解除可通过广
 播、电视、通... |
| KG | 1000.000 | 3.16 | 2）突发事件应急预案已修订。
 3）抢险组织及队伍名单（列出队伍成员的姓名和联系方式）。
 4）防汛物料和设施的分布图、调运图。
 6 安全监测
 6.1 巡视... |

### Q3: 堤防巡查的标准是什么？

**类型**: 规则描述 | **分类**: 标准规范

| 实验 | Top-1 得分 | 耗时(s) | Top-1 预览 |
|------|-----------|---------|------------|
| Baseline | 0.413 | 0.03 | 水文监测和测量设施、监控设备、指示牌警示牌、围网等设施的行为；
 4.向库区内排放污水、废液，倾倒工业废渣、生活、建筑垃圾等废弃物；
 5.在坝堤或交通桥行驶超... |
| CR_Enhanced | 0.413 | 0.02 | 水文监测和测量设施、监控设备、指示牌警示牌、围网等设施的行为；
 4.向库区内排放污水、废液，倾倒工业废渣、生活、建筑垃圾等废弃物；
 5.在坝堤或交通桥行驶超... |
| KG | 1000.000 | 2.76 | 38m，千年一遇 校核，最高库水位304.91m。
 根据杨家横水库除险加固工程 初步设计，结合水库除险加固后的
 实际运用情况， 经计算分析，水库工程达到千年... |

### Q4: 汛期调度的规则是什么？

**类型**: 流程说明 | **分类**: 规则流程

| 实验 | Top-1 得分 | 耗时(s) | Top-1 预览 |
|------|-----------|---------|------------|
| Baseline | 0.533 | 0.02 | 198926417890　　　1042032　　　282.167.31287.083.31　　　　　
 19901127.
 1975543.3　　　83426... |
| CR_Enhanced | 0.540 | 0.02 | Numerical data tables representing measurements or observations.2001631.3556440.... |
| KG | 1000.000 | 2.66 | ........................................... 9
 2.3.2流域水文测站分布、观测项目及水库报汛方式 .......... |

### Q5: 防洪抢险有哪些措施？

**类型**: 枚举列表 | **分类**: 措施清单

| 实验 | Top-1 得分 | 耗时(s) | Top-1 预览 |
|------|-----------|---------|------------|
| Baseline | 0.538 | 0.02 | 抢险队伍上坝防守，加固险工。
 513.7.3超标准洪水应急措施安排
 超标准洪水指超过水库现状防洪标准（千年一遇）的洪水，当
 发生超标准洪水时，本着“防重于... |
| CR_Enhanced | 0.538 | 0.02 | 抢险队伍上坝防守，加固险工。
 513.7.3超标准洪水应急措施安排
 超标准洪水指超过水库现状防洪标准（千年一遇）的洪水，当
 发生超标准洪水时，本着“防重于... |
| KG | 1000.000 | 2.68 | ...................... 38
 5.1 抢险调度................................................ |

### Q6: 水位超过多少需要启动预案？

**类型**: 条件判断 | **分类**: 触发条件

| 实验 | Top-1 得分 | 耗时(s) | Top-1 预览 |
|------|-----------|---------|------------|
| Baseline | 0.427 | 0.02 | 间和次数应根据观测任 务和水位变化情况
 而定。水位变化平稳时，每日8时观测一 次。稳定封冻期且水位平
 稳时，可每2~5日观测一次，月初月末两天应予观测。水位... |
| CR_Enhanced | 0.427 | 0.02 | Monitoring procedures for reservoir water levels and engineering personnel arran... |
| KG | 1000.000 | 2.73 | 49m，相应库容为600万m3；后汛期（8月16日至9月15日）
 汛限水位为128.43m，相应库容为700万m3。水库防御标准为万年
 一遇，相应库水位为 ... |

### Q7: 谁负责防洪指挥调度？

**类型**: 实体查询 | **分类**: 责任人查询

| 实验 | Top-1 得分 | 耗时(s) | Top-1 预览 |
|------|-----------|---------|------------|
| Baseline | 0.455 | 0.02 | 2001631.3556440.5515515　73028270295954286.566.16298.88.5200　　10.4
 2002419294165... |
| CR_Enhanced | 0.455 | 0.02 | 2001631.3556440.5515515　73028270295954286.566.16298.88.5200　　10.4
 2002419294165... |
| KG | 1000.000 | 2.35 | ...............48
 3.4防洪限制水位....................................................... |

### Q8: 水库大坝出现险情时应该联系谁？

**类型**: 多跳推理 | **分类**: 应急联系

| 实验 | Top-1 得分 | 耗时(s) | Top-1 预览 |
|------|-----------|---------|------------|
| Baseline | 0.461 | 0.03 | 生。
 ⑤由2人负责检查输、泄水建筑物有无裂缝、渗漏等现象。
 ⑥由2人负责检查溢洪道、 输水洞下游冲刷情况，溢洪道有 无堵
 塞，两岸护坡有无松动、坍塌、滑坡... |
| CR_Enhanced | 0.462 | 0.02 | Reporting procedures for flood control and disaster response at a reservoir.部位出险... |
| KG | 1000.000 | 4.23 | ...... 262
 11.5 工资福利及社会保障 ................................. 263
 11.6 费用收取........ |

## 性能统计

| 实验 | 平均耗时(s) | 平均得分 | 无结果数 |
|------|------------|----------|----------|
| Baseline | 0.05 | 0.493 | 0 |
| CR_Enhanced | 0.03 | 0.495 | 0 |
| KG | 5.33 | 1000.000 | 0 |

## 结论分析 (Scientific Conclusion)

### 1. CR 与 Baseline 形成“平局”
在修复了实验设计的变量（确保 Baseline 和 CR 均使用相同的持久化 ChromaDB 存储结构）后，两者得分几乎完全一致（0.493 vs 0.495）。这证明了：
- **统计学上的无显著差异**: 0.4% 的分差完全可以归因于随机噪声。
- **Contextual Retrieval 的局限性**: 在《防洪预案》这类高度结构化、条款清晰的公文数据中，LLM 生成的额外上下文（Context）并没有提供比原始文档结构更有效的信息。哪怕增加了上下文，Bm25 和 向量检索 依然主要依赖原始的精准匹配。

### 2. 为什么 CR 没有提升？ (Failure Analysis)
针对 "CN (Chinese) Contextual Retrieval" 失效的假设分析：
- **数据结构差异**: Phase 1（食堂数据）是碎片化的，Context 是“补全缺失信息”；Phase 2（防洪预案）是自包含的，Context 变成了“冗余信息”。
- **中文分词 (Tokenization) 瓶颈**: 尽管我们在构建索引时使用了 Jieba 分词，但在持久化加载和检索链路中，BM25 的关键词匹配可能依然受到中文语义切分的限制。LLM 生成的上下文（如“本段落关于...”）反而可能引入了非核心词的噪声，稀释了 TF-IDF 权重。

### 3. Knowledge Graph 的虚假繁荣
KG 组的 1000 分是 LlamaIndex 框架对“图谱实体命中”的默认高分标记，并不代表实际语义相关性。从 Top-1 结果看，KG 倾向于检索到包含关键词的“目录”或“标题”，而非具体内容，证明了通用图谱构建方案在垂直领域（无特定的 Schema 约束）的不可用性。

### 4. 最终建议
对于**政策法规、技术文档**等结构化数据，推荐使用 **Baseline (Hybrid Search)** 方案，因其成本最低且效果稳健。Contextual Retrieval 更适合**对话记录、碎片化知识**等场景。


