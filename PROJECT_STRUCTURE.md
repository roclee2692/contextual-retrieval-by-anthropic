# é¡¹ç›®ç»“æ„è¯´æ˜

```
contextual-retrieval-by-anthropic/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                      # é¡¹ç›®ä¸»æ–‡æ¡£ï¼ˆè‹±æ–‡ï¼‰
â”œâ”€â”€ ğŸ“„ README_CN.md                   # é¡¹ç›®ä¸»æ–‡æ¡£ï¼ˆä¸­æ–‡ï¼‰
â”œâ”€â”€ ğŸ“„ LICENSE                        # MITè®¸å¯è¯
â”œâ”€â”€ ğŸ“„ requirements.txt               # Pythonä¾èµ–
â”œâ”€â”€ ğŸ“„ .gitignore                     # Gitå¿½ç•¥è§„åˆ™
â”œâ”€â”€ ğŸ“„ .env                           # ç¯å¢ƒå˜é‡ï¼ˆæœ¬åœ°é…ç½®ï¼Œä¸ä¸Šä¼ ï¼‰
â”‚
â”œâ”€â”€ ğŸ“ data/                          # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ é˜²æ´ªé¢„æ¡ˆ/                     # é˜²æ´ªé¢„æ¡ˆPDFæ–‡æ¡£
â”‚   â””â”€â”€ æ°´åˆ©æ–‡ä»¶/                     # æ°´åˆ©ç›¸å…³æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ src/                           # æºä»£ç 
â”‚   â”œâ”€â”€ contextual_retrieval/         # CRæ ¸å¿ƒå®ç°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ save_vectordb.py          # å‘é‡æ•°æ®åº“æ„å»º
â”‚   â”‚   â”œâ”€â”€ save_bm25.py              # BM25ç´¢å¼•ï¼ˆå«jiebaä¸­æ–‡åˆ†è¯ï¼‰
â”‚   â”‚   â””â”€â”€ save_contextual_retrieval.py  # CRä¸Šä¸‹æ–‡ç”Ÿæˆ
â”‚   â”œâ”€â”€ schema/                       # çŸ¥è¯†å›¾è°±Schemaå®šä¹‰
â”‚   â”‚   â””â”€â”€ flood_schema.py           # é˜²æ´ªé¢†åŸŸå®ä½“å…³ç³»å®šä¹‰
â”‚   â”œâ”€â”€ db/                           # æ•°æ®åº“æ–‡ä»¶ï¼ˆgitignoreï¼‰
â”‚   â”‚   â”œâ”€â”€ flood_prevention_db_baseline_*/  # Baselineæ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ flood_prevention_db_cr_*/        # CRå¢å¼ºæ•°æ®åº“
â”‚   â”‚   â””â”€â”€ knowledge_graph/          # çŸ¥è¯†å›¾è°±å­˜å‚¨
â”‚   â””â”€â”€ tools/                        # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ rag_workflow.py           # RAGå·¥ä½œæµ
â”‚
â”œâ”€â”€ ğŸ“ scripts/                       # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ create_save_db.py             # åˆ›å»ºå‘é‡+BM25æ•°æ®åº“
â”‚   â”œâ”€â”€ create_knowledge_graph.py     # æ„å»ºçŸ¥è¯†å›¾è°±ï¼ˆOneKEæ¨¡å‹ï¼‰
â”‚   â”œâ”€â”€ test_ab_simple.py             # A/Bæµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ visualize_kg.py               # çŸ¥è¯†å›¾è°±å¯è§†åŒ–
â”‚   â”œâ”€â”€ phase3_baseline_vs_cr.py      # Phase3: Baseline vs CR å¯¹æ¯”å®éªŒ
â”‚   â””â”€â”€ analyze_experiment_validity.py # å®éªŒç»“æœç»Ÿè®¡æ˜¾è‘—æ€§åˆ†æ
â”‚
â”œâ”€â”€ ğŸ“ results/                       # å®éªŒç»“æœ
â”‚   â”œâ”€â”€ summary_table.csv             # ç»“æœæ±‡æ€»è¡¨
â”‚   â”œâ”€â”€ cases.md                      # å…¸å‹æ¡ˆä¾‹åˆ†æ
â”‚   â”œâ”€â”€ report_experiment_1_RAG_Chunked.*     # å®éªŒ1: Baselineç»“æœ
â”‚   â”œâ”€â”€ report_experiment_2_CR_Prefixed.*     # å®éªŒ2: CRå¢å¼ºç»“æœ
â”‚   â”œâ”€â”€ report_experiment_3_Jieba_KG.*        # å®éªŒ3: Jieba+KGç»“æœ
â”‚   â”œâ”€â”€ phase3_baseline_vs_cr.md      # Phase3: åŒç»„å¯¹æ¯”æŠ¥å‘Š
â”‚   â””â”€â”€ phase3_baseline_vs_cr.json    # Phase3: è¯¦ç»†æ•°æ®
â”‚
â”œâ”€â”€ ğŸ“ docs/                          # æ–‡æ¡£
â”‚   â”œâ”€â”€ ä¸‰ä¸ªå®éªŒå¯¹æ¯”åˆ†ææŠ¥å‘Š.md        # è¯¦ç»†åˆ†ææŠ¥å‘Š
â”‚   â”œâ”€â”€ æ”¹è¿›æ–¹æ¡ˆ.md                   # ä¸‹ä¸€æ­¥æ”¹è¿›è®¡åˆ’
â”‚   â””â”€â”€ å‘å¸ƒæ¸…å•.md                   # GitHubå‘å¸ƒæŒ‡å—
â”‚
â””â”€â”€ ğŸ“ img/                           # å›¾ç‰‡èµ„æº
    â””â”€â”€ *.png                         # æˆªå›¾ã€å›¾è¡¨

```

## ğŸ¯ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### å¿…è¯»æ–‡ä»¶
1. **README.md / README_CN.md** - é¡¹ç›®ä»‹ç»ã€å¿«é€Ÿå¼€å§‹ã€æ ¸å¿ƒå‘ç°
2. **results/phase3_baseline_vs_cr.md** - Phase3 å®éªŒå¯¹æ¯”æŠ¥å‘Š
3. **results/cases.md** - å…¸å‹æ¡ˆä¾‹åˆ†æ
4. **docs/ä¸‰ä¸ªå®éªŒå¯¹æ¯”åˆ†ææŠ¥å‘Š.md** - å®Œæ•´å®éªŒå¯¹æ¯”

### è¿è¡Œè„šæœ¬
1. **scripts/create_save_db.py** - åˆ›å»ºå‘é‡+BM25æ•°æ®åº“
2. **scripts/phase3_baseline_vs_cr.py** - è¿è¡Œ Baseline vs CR å¯¹æ¯”å®éªŒ
3. **scripts/analyze_experiment_validity.py** - åˆ†æå®éªŒç»“æœç»Ÿè®¡æ˜¾è‘—æ€§
4. **scripts/create_knowledge_graph.py** - æ„å»ºçŸ¥è¯†å›¾è°±ï¼ˆå®éªŒæ€§ï¼‰

### å®éªŒç»“æœ
- **Phase 1-2** (åŸå§‹ä¸‰ç»„å®éªŒ): results/report_experiment_*.txt
- **Phase 3** (Baseline vs CR): results/phase3_baseline_vs_cr.md

## ğŸ“Š Phase 3 å®éªŒç»“è®º

| æŒ‡æ ‡ | Baseline | CR Enhanced | å·®å¼‚ |
|------|----------|-------------|------|
| å¹³å‡ç›¸ä¼¼åº¦ | 0.495 | 0.501 | **+1.1%** |
| t ç»Ÿè®¡é‡ | - | - | **3.95** (p<0.05) |
| Cohen's d | - | - | **1.25** (å¤§æ•ˆåº”) |

**ç»“è®º**: CR å¢å¼ºåœ¨ç»Ÿè®¡ä¸Šæ˜¾è‘—ä¼˜äº Baselineï¼Œä½†æå‡å¹…åº¦è¾ƒå°ã€‚

## ğŸ“¦ æ–‡ä»¶ç»Ÿè®¡

- **æ ¸å¿ƒä»£ç æ–‡ä»¶**: 8ä¸ª
- **è„šæœ¬æ–‡ä»¶**: 6ä¸ª
- **æ–‡æ¡£æ–‡ä»¶**: 6ä¸ª
- **ç»“æœæ–‡ä»¶**: 9ä¸ª

## ğŸ—‘ï¸ å·²æ¸…ç†çš„å†—ä½™æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å·²æ·»åŠ åˆ° .gitignoreï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»“åº“ï¼š
- è°ƒè¯•è„šæœ¬ (debug_*.py)
- ä¸€æ¬¡æ€§æµ‹è¯•è„šæœ¬ (test_oneke_*.py ç­‰)
- æ¨¡å‹æ–‡ä»¶ (models/*.gguf)
- æ•°æ®åº“æ–‡ä»¶ (src/db/*)
- åŸå§‹æ•°æ® (data/é˜²æ´ªé¢„æ¡ˆ/, data/æ°´åˆ©æ–‡ä»¶/)

## ğŸš€ å¿«é€Ÿå¯¼èˆª

**æƒ³è¦ä»€ä¹ˆï¼Ÿ** â†’ **å»å“ªé‡Œçœ‹ï¼Ÿ**

- äº†è§£é¡¹ç›® â†’ README.md
- è¿è¡Œå®éªŒ â†’ scripts/test_ab_simple.py
- æŸ¥çœ‹ç»“æœ â†’ results/cases.md
- æ·±åº¦åˆ†æ â†’ docs/ä¸‰ä¸ªå®éªŒå¯¹æ¯”åˆ†ææŠ¥å‘Š.md
- æ”¹è¿›æ–¹å‘ â†’ docs/æ”¹è¿›æ–¹æ¡ˆ.md
- å‘å¸ƒæŒ‡å— â†’ docs/å‘å¸ƒæ¸…å•.md
